{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export const createMarkup = arr => {\n  return arr\n    .map(imgDetails => {\n      const {\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      } = imgDetails;\n      return `<li class=\"item\">\n\t\t\t\t\t<a class=\"item-link\" href=\"${largeImageURL}\"><img class=\"item-img\" src=\"${webformatURL}\" alt=\"\" title=\"${tags}\" /></a>\n\t\t\t\t\t<ul class=\"item-desc\">\n\t\t\t\t\t\t\t<li>Likes\n\t\t\t\t\t\t\t\t<p>${likes}</p>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li>Views\n\t\t\t\t\t\t\t\t<p>${views}</p>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li>Comments\n\t\t\t\t\t\t\t\t<p>${comments}</p>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li>Downloads\n\t\t\t\t\t\t\t\t<p>${downloads}</p>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t</ul>\n\t\t\t\t</li>`;\n    })\n    .join('');\n};\n","import axios from 'axios';\n\nexport const fetchByUserKey = (userKey, page) => {\n  return axios.get('https://pixabay.com/api/', {\n    params: {\n      key: '45511756-f868b950a5b29611a8f235e23',\n      q: `${userKey.trim()}`,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      per_page: 15,\n      page,\n    },\n  });\n};\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { createMarkup } from './js/render-functions';\nimport { fetchByUserKey } from './js/pixabay-api';\n\nconst formEL = document.querySelector('.search-form');\nconst galleryEL = document.querySelector('.gallery');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\nconst loaderEl = document.createElement('p');\n\nloaderEl.classList.add('loader');\nconst galleryModal = new SimpleLightbox('.gallery a');\n\nlet page = 1;\nlet userKeywordForLoadMore;\nlet totalPages;\n\nconst onFormElSubmit = async event => {\n  event.preventDefault();\n  const userKeyword = event.target.elements.user_keyword.value;\n  if (userKeyword.trim() === '') {\n    return;\n  }\n  userKeywordForLoadMore = userKeyword;\n  galleryEL.innerHTML = '';\n  loadMoreBtn.style.display = 'none';\n  page = 1;\n\n  formEL.after(loaderEl);\n\n  try {\n    const response = await fetchByUserKey(userKeyword, page);\n    if (response.data.hits.length === 0) {\n      iziToast.error({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n      });\n      return;\n    }\n    galleryEL.innerHTML = createMarkup(response.data.hits);\n    galleryModal.refresh();\n    formEL.reset();\n    page++;\n    totalPages = Math.ceil(response.data.totalHits / 15);\n    if (totalPages > 1) {\n      loadMoreBtn.style.display = 'block';\n    }\n  } catch (error) {\n    console.log(error);\n  } finally {\n    loaderEl.remove();\n  }\n};\n\nconst onLoadMoreClick = async () => {\n  try {\n    galleryEL.after(loaderEl);\n    loadMoreBtn.style.display = 'none';\n\n    const response = await fetchByUserKey(userKeywordForLoadMore, page);\n    const markup = createMarkup(response.data.hits);\n\n    loaderEl.remove();\n    galleryEL.insertAdjacentHTML('beforeend', markup);\n    galleryModal.refresh();\n    loadMoreBtn.style.display = 'block';\n    page++;\n\n    const liEl = document.querySelector('.gallery li');\n    const liElHeight = liEl.getBoundingClientRect().height;\n\n    window.scrollBy({\n      top: liElHeight * 2,\n      behavior: 'smooth',\n    });\n\n    if (page > totalPages) {\n      iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n      });\n      loadMoreBtn.style.display = 'none';\n    }\n  } catch (error) {\n    console.log(error);\n  }\n};\n\nformEL.addEventListener('submit', onFormElSubmit);\nloadMoreBtn.addEventListener('click', onLoadMoreClick);\n"],"names":["createMarkup","arr","imgDetails","webformatURL","largeImageURL","tags","likes","views","comments","downloads","fetchByUserKey","userKey","page","axios","formEL","galleryEL","loadMoreBtn","loaderEl","galleryModal","SimpleLightbox","userKeywordForLoadMore","totalPages","onFormElSubmit","event","userKeyword","response","iziToast","error","onLoadMoreClick","markup","liElHeight"],"mappings":"owBAAO,MAAMA,EAAeC,GACnBA,EACJ,IAAIC,GAAc,CACjB,KAAM,CACJ,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACD,EAAGP,EACJ,MAAO;AAAA,kCACqBE,CAAa,gCAAgCD,CAAY,mBAAmBE,CAAI;AAAA;AAAA;AAAA,aAGrGC,CAAK;AAAA;AAAA;AAAA,aAGLC,CAAK;AAAA;AAAA;AAAA,aAGLC,CAAQ;AAAA;AAAA;AAAA,aAGRC,CAAS;AAAA;AAAA;AAAA,UAItB,CAAK,EACA,KAAK,EAAE,EC5BCC,EAAiB,CAACC,EAASC,IAC/BC,EAAM,IAAI,2BAA4B,CAC3C,OAAQ,CACN,IAAK,qCACL,EAAG,GAAGF,EAAQ,KAAM,CAAA,GACpB,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,GACV,KAAAC,CACD,CACL,CAAG,ECNGE,EAAS,SAAS,cAAc,cAAc,EAC9CC,EAAY,SAAS,cAAc,UAAU,EAC7CC,EAAc,SAAS,cAAc,gBAAgB,EACrDC,EAAW,SAAS,cAAc,GAAG,EAE3CA,EAAS,UAAU,IAAI,QAAQ,EAC/B,MAAMC,EAAe,IAAIC,EAAe,YAAY,EAEpD,IAAIP,EAAO,EACPQ,EACAC,EAEJ,MAAMC,EAAiB,MAAMC,GAAS,CACpCA,EAAM,eAAc,EACpB,MAAMC,EAAcD,EAAM,OAAO,SAAS,aAAa,MACvD,GAAIC,EAAY,KAAM,IAAK,GAG3B,CAAAJ,EAAyBI,EACzBT,EAAU,UAAY,GACtBC,EAAY,MAAM,QAAU,OAC5BJ,EAAO,EAEPE,EAAO,MAAMG,CAAQ,EAErB,GAAI,CACF,MAAMQ,EAAW,MAAMf,EAAec,EAAaZ,CAAI,EACvD,GAAIa,EAAS,KAAK,KAAK,SAAW,EAAG,CACnCC,EAAS,MAAM,CACb,QACE,2EACF,SAAU,UAClB,CAAO,EACD,MACD,CACDX,EAAU,UAAYf,EAAayB,EAAS,KAAK,IAAI,EACrDP,EAAa,QAAO,EACpBJ,EAAO,MAAK,EACZF,IACAS,EAAa,KAAK,KAAKI,EAAS,KAAK,UAAY,EAAE,EAC/CJ,EAAa,IACfL,EAAY,MAAM,QAAU,QAE/B,OAAQW,EAAO,CACd,QAAQ,IAAIA,CAAK,CACrB,QAAY,CACRV,EAAS,OAAM,CAChB,EACH,EAEMW,EAAkB,SAAY,CAClC,GAAI,CACFb,EAAU,MAAME,CAAQ,EACxBD,EAAY,MAAM,QAAU,OAE5B,MAAMS,EAAW,MAAMf,EAAeU,EAAwBR,CAAI,EAC5DiB,EAAS7B,EAAayB,EAAS,KAAK,IAAI,EAE9CR,EAAS,OAAM,EACfF,EAAU,mBAAmB,YAAac,CAAM,EAChDX,EAAa,QAAO,EACpBF,EAAY,MAAM,QAAU,QAC5BJ,IAGA,MAAMkB,EADO,SAAS,cAAc,aAAa,EACzB,sBAAqB,EAAG,OAEhD,OAAO,SAAS,CACd,IAAKA,EAAa,EAClB,SAAU,QAChB,CAAK,EAEGlB,EAAOS,IACTK,EAAS,KAAK,CACZ,QAAS,6DACT,SAAU,UAClB,CAAO,EACDV,EAAY,MAAM,QAAU,OAE/B,OAAQW,EAAO,CACd,QAAQ,IAAIA,CAAK,CAClB,CACH,EAEAb,EAAO,iBAAiB,SAAUQ,CAAc,EAChDN,EAAY,iBAAiB,QAASY,CAAe"}